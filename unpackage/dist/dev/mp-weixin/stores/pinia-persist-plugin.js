"use strict";const s=require("../common/vendor.js"),n=require("../config/index.js"),S=({store:e})=>{const c=[{storeId:"counter",key:"count"},{storeId:"auth",key:"isLoggedIn"}],r=s.index.getStorageSync(n.STORAGE_KEY);r&&e.$patch(JSON.parse(r)),e.$subscribe(({events:a})=>{if(!Array.isArray(a)){const i=c.find(t=>t.storeId===e.$id&&t.key===a.key);if(i){const{[i.key]:t}=e.$state,o=JSON.parse(s.index.getStorageSync(n.STORAGE_KEY)||"{}");s.index.setStorageSync(n.STORAGE_KEY,JSON.stringify({...o,[i.key]:t}))}}})};exports.piniaPersistPlugin=S;

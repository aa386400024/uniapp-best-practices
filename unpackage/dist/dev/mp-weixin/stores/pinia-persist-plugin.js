"use strict";const n=require("../common/vendor.js"),i=require("../config/index.js"),g=({store:e})=>{const a=[{storeId:"counter",key:"count"},{storeId:"auth",key:"isLoggedIn"}],o=n.index.getStorageSync(i.config.constants.storageKey);o&&e.$patch(JSON.parse(o)),e.$subscribe(({events:r})=>{if(!Array.isArray(r)){const s=a.find(t=>t.storeId===e.$id&&t.key===r.key);if(s){const{[s.key]:t}=e.$state,c=JSON.parse(n.index.getStorageSync(i.config.constants.storageKey)||"{}");n.index.setStorageSync(i.config.constants.storageKey,JSON.stringify({...c,[s.key]:t}))}}})};exports.piniaPersistPlugin=g;

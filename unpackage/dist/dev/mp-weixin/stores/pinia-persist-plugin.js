"use strict";const e=require("../common/vendor.js"),t=require("../config/env.js");exports.piniaPersistPlugin=({store:s})=>{const r=[{storeId:"counter",key:"count"},{storeId:"auth",key:"isLoggedIn"}],n=e.index.getStorageSync(t.STORAGE_KEY);n&&s.$patch(JSON.parse(n)),s.$subscribe((({events:n})=>{if(!Array.isArray(n)){const i=r.find((e=>e.storeId===s.$id&&e.key===n.key));if(i){const{[i.key]:r}=s.$state,n=JSON.parse(e.index.getStorageSync(t.STORAGE_KEY)||"{}");e.index.setStorageSync(t.STORAGE_KEY,JSON.stringify({...n,[i.key]:r}))}}}))};

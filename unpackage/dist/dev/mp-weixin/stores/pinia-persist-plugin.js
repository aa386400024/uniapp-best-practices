"use strict";const i=require("../common/vendor.js"),c=require("../config/index.js"),g=({store:e})=>{const o=[{storeId:"counter",key:"count"},{storeId:"auth",key:"isLoggedIn"}],n=i.index.getStorageSync(c.config.constants.storageKey);n&&e.$patch(JSON.parse(n)),e.$subscribe(({events:r})=>{if(!Array.isArray(r)){const s=o.find(t=>t.storeId===e.$id&&t.key===r.key);if(s){const{[s.key]:t}=e.$state,a=JSON.parse(i.index.getStorageSync(STORAGE_KEY)||"{}");i.index.setStorageSync(STORAGE_KEY,JSON.stringify({...a,[s.key]:t}))}}})};exports.piniaPersistPlugin=g;

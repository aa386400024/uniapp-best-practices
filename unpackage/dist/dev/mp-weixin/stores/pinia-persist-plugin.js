"use strict";const e=require("../common/vendor.js"),t=require("../config/index.js");exports.piniaPersistPlugin=({store:s})=>{const n=[{storeId:"counter",key:"count"},{storeId:"auth",key:"isLoggedIn"}],o=e.index.getStorageSync(t.config.constants.storageKey);o&&s.$patch(JSON.parse(o)),s.$subscribe((({events:o})=>{if(!Array.isArray(o)){const r=n.find((e=>e.storeId===s.$id&&e.key===o.key));if(r){const{[r.key]:n}=s.$state,o=JSON.parse(e.index.getStorageSync(t.config.constants.storageKey)||"{}");e.index.setStorageSync(t.config.constants.storageKey,JSON.stringify({...o,[r.key]:n}))}}}))};
